<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Guide for Software Developer - Cloud-V Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Guide for Software Developer";
        var mkdocs_page_input_path = "Software_Developer_Guide.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Cloud-V Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">For Software Developers</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">RISC-V CI User's Guide</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Guide for Software Developer</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#pre-requisites">Pre-requisites</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#getting-an-account-for-cloud-v">Getting an account for Cloud-V</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#setting-up-cloud-v-pipeline-inside-github-project-repository">Setting up cloud-v-pipeline inside github project repository</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#setting-credentials-for-webhook">Setting credentials for webhook</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#obtaining-github-access-token-for-repository">Obtaining github access token for repository</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#configuring-repository-webhook-optional">Configuring repository webhook (Optional)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#configurations-inside-cloud-v">Configurations inside Cloud-V</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#requirements-for-administrator">Requirements for administrator</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Creating_jenkinsfile/">Creating a Jenkinfile</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Tooling/">Tools available in Cloud-V</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">For Administrators</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">Jenkins Docs</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../Building_Jenkins_github_repo/">Building Jenkins</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Creating_Jenkins_Node_on_LXC/">Creating Jenkins Node on LXC</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Creating_CI_CD_pipeline/">Creating a pipeline project</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Multinode_Pipelines/">Creating Multinode pipelines</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Adding_Custom-build_packages_in_Jenkins/">Adding custom-build packages in Jenkins</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../jenkins_github_integration/Github_push_webhook/">Github Push webhook integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../jenkins_github_integration/Github_PR_webhook_integration/">Github PR webhook integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../jenkins_gitlab_integration/">GitLab Integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Installing_ssl_certificates_new/">Letsencrypt configuration with Jenkins</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">QEMU and Linux Kernel</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../Building_qemu/">Installing Qemu for RISC-V</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Building_Linux_Kernel/">Building Linux kernel and booting on QEMU</a>
                </li>
                <li class="toctree-l2"><a class="" href="../Booting_ubuntu22.04_riscv64">Booting RISC-V Ubuntu 22.04 on qemu-system-riscv64</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Cross-Compilation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../Cross_Compiling/Overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Cross_Compiling/Cross_compiling%20python3.8.15/">Cross Compiling Python3.8.15</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Cross_Compiling/Cross_compiling_openssl/">Cross Compiling Openssl</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Cross_Compiling/Cross_compiling_ruby/">Cross Compiling Ruby</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Cross_Compiling/Cross_compiling_dhrystone/">Cross Compiling Drhystone</a>
                </li>
                <li class="toctree-l2"><a class="" href="../Cross_Compiling/Cross_compiling_coremark">Cross Compiling Coremark</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Cross_Compiling/Cross_compiling_rust/">Cross Compiling Rust</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Cross_Compiling/Cross_compiling_go/">Cross Compiling go</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Usage monitoring</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../Usage_Monitoring/Prometheus_Grafana/">Setting up Grafana and Prometheus</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Usage_Monitoring/Integrating_prometheus_grafana/">Integrating Prometheus with Grafana</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Cloud-V Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>For Software Developers &raquo;</li>
          <li>RISC-V CI User's Guide &raquo;</li>
      <li>Guide for Software Developer</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="software-developer-guide-for-risc-v-ci">Software Developer Guide for RISC-V CI</h1>
<p>A software developer is the end-user who will develop or build his/her projects on RISC-V CI infrastructure. This guide will cover all the things a software developer needs to create a project based on Cloud-V Continuous Integration (CI).  </p>
<h2 id="pre-requisites">Pre-requisites</h2>
<ol>
<li>GitHub account.</li>
<li>GitHub project repository with owner rights.</li>
</ol>
<h2 id="getting-an-account-for-cloud-v">Getting an account for Cloud-V</h2>
<p>Fill out <a href="https://docs.google.com/forms/d/e/1FAIpQLSdr8qRF3blH0Jv0dfWhasu6t0IwC0h2II8q2U6keM3vhKoYlQ/viewform?usp=sf_link">this</a> google form with all the required information for getting an account on Cloud-V.</p>
<p>After this we will get back to you with login credentials.</p>
<h2 id="setting-up-cloud-v-pipeline-inside-github-project-repository">Setting up <code>cloud-v-pipeline</code> inside github project repository</h2>
<p>Cloud-V will need a <code>cloud-v-pipeline</code> written with jenkinsfile pipeline syntax to start execution of tests/checks (see <a href="https://www.jenkins.io/doc/book/pipeline/syntax/">link</a>). This pipeline will contain all the stages (and may be steps) of a CI/CD pipeline. This pipeline can be <code>scripted pipeline</code> which will only have stages or it can also be <code>declarative pipeline</code> which may also have steps inside stages.  </p>
<p>A simple scripted <code>Helloworld</code> pipeline in linux is as follows:</p>
<pre><code class="language-shell">
node{
    stage('*** Phase 1 ***') {
        //Using bash commands
        sh '''#!/bin/bash
            echo &quot;Hello World !\n&quot;
         '''
    }
}
</code></pre>
<p>Upon execution of such a pipeline, the console output can be viewed as follows.  </p>
<p><img alt="Console Output" src="../doc_images/Console output for Hello World.png" /></p>
<p><em><strong>Note:</strong> This cloud-v-pipeline should remain same in all the branches and pull requests.</em>  </p>
<h2 id="setting-credentials-for-webhook">Setting credentials for webhook</h2>
<p>Cloud-V supports webhooks which can trigger the job from external sources such as GitHub. They work in a way such that, if a specified branch is committed or if a pull request is created, the specified job build starts running depending upon the trigger event which is set in build's configuration in Cloud-V.  </p>
<p>This process requires access token of the repository <strong>CREATED BY OWNER OF REPOSITORY</strong> on which the webhook is to be set. These credentials can be safely added to Cloud-V without anyone (even administrator) seeing the passwords as follows.</p>
<h3 id="obtaining-github-access-token-for-repository">Obtaining github access token for repository</h3>
<p>Navigate to the dashboard of your github account and click on the your github profile picture on the top-right corner on dashboard.</p>
<p><img alt="github settings1" src="../doc_images/github_repo_token1.png" /></p>
<p>Then click on the "Settings" from the list.</p>
<p><img alt="github settings1" src="../doc_images/github_repo_token2.png" /></p>
<p>From the left option bar in Settings scroll down and click on "Developer settings".</p>
<p><img alt="github settings3" src="../doc_images/github_repo_token3.png" /></p>
<p>Once there, click on "Personal access tokens", then click on "Fine-grained tokens" from the dropdown list and after that click on "Generate new token".</p>
<p><img alt="github settings4" src="../doc_images/github_repo_token4.png" /></p>
<p>This will open the page for setting up new access token. Follow following steps for creating a token:  </p>
<ol>
<li>Give your token a meaningful name under "Token name"</li>
<li>Set expiration date in "Expiration" depending upon how long you would like your repository to be integrated with Cloud-V (think of a meaningful upper bound)</li>
<li>The "Resource owner" should be the owner of the repository who can access all kinds of settings of the repository</li>
<li>Under "Repository access", check "Only select repositories" and then select the repository for which you would like to create the token</li>
<li>
<p>Under "Permissions" section, expand "Repository Permissions" and give the following two permissions:</p>
<ul>
<li>"Read and write" access to "Commit statuses" (Because after the CI has run, Cloud-V will be able to set the status of the commit accordingly)</li>
<li>"Read and write" access to "Webhooks" (Read permission for the webhook is required for reading the incoming pull request. Write permission is required if you want Cloud-V to set the webhook for you instead of you going through the repository settings and setting it up)</li>
</ul>
</li>
</ol>
<p><em><strong>IMPORTANT NOTE:</strong> If you have decided to create a webhook yourself or have already created one, then Cloud-V will not be able to manage the settings for you, proceed to <a href="#configuring-repository-webhook-optional">following</a> section</em></p>
<h3 id="configuring-repository-webhook-optional">Configuring repository webhook (Optional)</h3>
<p><strong><em>You can skip this step if you have given webhook read and write permission in your repository token settings in above step and havent configured any webhook yourself</em></strong></p>
<p>In GitHub,</p>
<ul>
<li>Go to repository settings which you want to integrate for Cloud-V.  </li>
</ul>
<p><img alt="Github_settings" src="../doc_images/repo_settings.png" /></p>
<ul>
<li>Go to <code>Webhooks</code>  </li>
</ul>
<p><img alt="webhooks" src="../doc_images/webhooks.png" />  </p>
<ul>
<li>Click on <code>Add webhook</code>  </li>
</ul>
<p><img alt="add_webhook" src="../doc_images/newwebhook.png" /></p>
<ul>
<li>Add <code>Payload URL</code> as <code>https://cloud-v.co:8443/ghprbhook/</code>  </li>
<li>Select content type as <code>application/x-www-form-urlencoded</code></li>
<li>Check <code>Enable SSL verification</code>  </li>
<li>In the section <strong>Which events would you like to trigger this webhook?</strong> check <code>Let me select individual events</code> and check <code>Pul requests</code> as individual events and dont check any other permission.</li>
</ul>
<p>Webhook settings will look something like this:</p>
<p><img alt="webhook_settings" src="../doc_images/webhook-settings1.png" />  </p>
<h3 id="configurations-inside-cloud-v">Configurations inside Cloud-V</h3>
<p><em><strong>Note:</strong> Currently users are not able to see or modify pipeline build configuration inside Jenkins, that is currently managed by administrator. Users are requested to inform administrator about how they want their pipeline configured.</em></p>
<ul>
<li>We will provide you with Cloud-V credentials on the provided email.</li>
<li>Login with provided credentials.</li>
<li>Click on the <code>Credentials</code> in the left menu.  </li>
</ul>
<p><img alt="Credentials1" src="../doc_images/Credentials1.png.png" /></p>
<ul>
<li>This will take you to the credentials page.</li>
<li>Scroll down to the <code>Stores scoped to Jenkins</code> and click on the <code>System</code> as shown in the image.  </li>
</ul>
<p><img alt="Credentials2" src="../doc_images/Credentials2.png" />  </p>
<ul>
<li>Click on <code>Global credentials (unrestricted)</code>.  </li>
</ul>
<p><img alt="Credentials3" src="../doc_images/Credentials3.png" /></p>
<ul>
<li>Click on <code>Add Credentials</code>.  </li>
</ul>
<p><img alt="Credentials4" src="../doc_images/Credentials4.png" /></p>
<ul>
<li>This will take you to the <code>New Credentials</code> page.</li>
<li>Select <code>Kind</code> as <code>Secret text</code>.</li>
<li>Select <code>Scope</code> as <code>Global (Jenkins, nodes, items, all child items etc)</code>.</li>
<li>Enter <code>Secret</code> as <code>GitHub personal authentication token</code> (PAT) which can be acquired from Github account settings.  </li>
<li>Enter a unique<code>ID</code>. <code>Description</code> can be left empty. But it is recommended to give a suitable but careful description by which administrator will be able to identify and use these credentials to set up github webhook.</li>
<li>Select <code>Create</code>.</li>
<li>This process will look something like this.</li>
</ul>
<p><img alt="Credentials5" src="../doc_images/Credentials5.png" />  </p>
<ul>
<li>Now credentials will be available in the credentials list and will be shown to you as well as administrator as shown in the image below. This will create an option in configurations for using these credentials in github webhook without changing or viewing them.  </li>
</ul>
<p><img alt="Credentials6" src="../doc_images/Credentials6.png" />  </p>
<ul>
<li>Note the credentials ID (as shown in the image below) and email it to the same administrator email on which you received the credentials. It is important that administrator knows the credentials ID because he will use it in the job build configurations.  </li>
</ul>
<p><img alt="Credentials6_id" src="../doc_images/Credentials6_id.png" />  </p>
<p><em><strong>Note: Please make sure to inform the administrator via email that you have added the credentials in jenkins. Also, send administrator the ID of credentials via email.</strong></em></p>
<h2 id="requirements-for-administrator">Requirements for administrator</h2>
<p>After the above setup is complete from software developer's side, developer will need to provide the administrator with following information.  </p>
<ul>
<li>Dependencies for running the project which can be packages which are needed to install in the RISC-V CI environment by administrator.</li>
<li>Events for triggering the job build.</li>
<li>URL of GitHub repository.</li>
<li>Path and name of Jenkinsfile on the provided GitHub repository.</li>
<li>Any additional information which should be given for successful execution of job builds.</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Creating_jenkinsfile/" class="btn btn-neutral float-right" title="Creating a Jenkinfile">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Creating_jenkinsfile/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
